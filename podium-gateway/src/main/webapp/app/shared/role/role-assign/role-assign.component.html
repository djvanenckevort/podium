<!--
  ~ Copyright (c) 2017. The Hyve and respective contributors
  ~
  ~ Licensed under the Apache License, Version 2.0 (the "License");
  ~ you may not use this file except in compliance with the License.
  ~
  ~ See the file LICENSE in the root of this repository.
  ~
  -->

<h3><span jhiTranslate="podiumGatewayApp.role.home.title">Roles</span></h3>
<jhi-alert></jhi-alert>

<div class="container-fluid" *ngIf="organisation">
    <div class="row">
        <form name="roleForm" role="form" novalidate #roleForm="ngForm">
            <jhi-alert-error></jhi-alert-error>

            <div class="table-responsive" *ngIf="organisation.roles">
                <table class="table table-striped">
                    <thead>
                        <tr>
                            <th jhiTranslate="podiumGatewayApp.role.users">User</th>
                            <th jhiTranslate="podiumGatewayApp.role.authority">Authority</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let role of organisation.roles">
                            <td>
                                <input [(ngModel)]="asyncSelected"
                                       [ngModelOptions]="{standalone: true}"
                                       [typeahead]="dataSource"
                                       (typeaheadLoading)="changeTypeaheadLoading($event)"
                                       (typeaheadNoResults)="changeTypeaheadNoResults($event)"
                                       (typeaheadOnSelect)="typeaheadOnSelect($event)"
                                       typeaheadOptionsLimit="7"
                                       typeaheadOptionField="name"
                                       placeholder="Locations loaded with timeout"
                                       class="form-control">
                                <!-- User select -->
                                <!--<select class="form-control" id="field_users" multiple name="users" [(ngModel)]="role.users">

                                    <option [ngValue]="userOption.uuid" *ngFor="let userOption of users; trackBy: trackByUuid">{{userOption.login}}</option>
                                </select>-->
                            </td>
                            <td>
                                <!-- Authority select -->
                                <select class="form-control" id="field_authority" name="authority" [(ngModel)]="role.authority" >
                                    <option [ngValue]="undefined" disabled selected>Please select a role</option>
                                    <option [ngValue]="authorityOption.token === role.authority ? role.authority : authorityOption.token" *ngFor="let authorityOption of authorityOptions; trackBy: trackAuthorityByToken">{{authorityOption.name}}</option>
                                </select>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </form>
    </div>
</div>

